var xe=Object.create;var tt=Object.defineProperty;var Se=Object.getOwnPropertyDescriptor;var Ae=Object.getOwnPropertyNames;var ve=Object.getPrototypeOf,Ee=Object.prototype.hasOwnProperty;var Re=(n,i)=>()=>(i||n((i={exports:{}}).exports,i),i.exports),Ce=(n,i)=>{for(var l in i)tt(n,l,{get:i[l],enumerable:!0})},ie=(n,i,l,d)=>{if(i&&typeof i=="object"||typeof i=="function")for(let h of Ae(i))!Ee.call(n,h)&&h!==l&&tt(n,h,{get:()=>i[h],enumerable:!(d=Se(i,h))||d.enumerable});return n};var et=(n,i,l)=>(l=n!=null?xe(ve(n)):{},ie(i||!n||!n.__esModule?tt(l,"default",{value:n,enumerable:!0}):l,n)),Te=n=>ie(tt({},"__esModule",{value:!0}),n);var K=Re((rt,ae)=>{(function(n,i){typeof rt=="object"&&typeof ae<"u"?i(rt):typeof define=="function"&&define.amd?define(["exports"],i):i((n=typeof globalThis<"u"?globalThis:n||self).jsutils={})})(rt,function(n){"use strict";let i={SHOULD_LOG:!0,SHOULD_THROW:!1,LOG_PREFIX:null},l=()=>!0,d=(t,e={},r={})=>{let{logs:s=i.SHOULD_LOG,throws:o=i.SHOULD_THROW,prefix:a=i.LOG_PREFIX}=r,c=Object.entries(t).map(([x,M])=>h(x,M,e[x]||e.$default||l)),{success:f,cases:j}=c.reduce((x,M)=>b(x,M,{logs:s,throws:o,prefix:a}),{success:!0,cases:{}});return[f,j]};d.setOptions=({logs:t,throws:e,prefix:r})=>{t!==void 0&&(i.SHOULD_LOG=t),e!==void 0&&(i.SHOULD_THROW=e),r!==void 0&&(i.LOG_PREFIX=r)},d.resetOptions=()=>{i.SHOULD_LOG=!0,i.SHOULD_THROW=!1,i.LOG_PREFIX=null};let h=(t,e,r)=>{let s=r(e),o=!r.name||r.name===t||r.name==="$default"?r.toString():r.name;return{success:s,key:t,value:e,validator:r,reason:s?null:[`Argument "${t}" with value `,e,` failed validator: ${o}.`]}},b=(t,e,{logs:r,throws:s,prefix:o})=>(!e.success&&S(e,r,s,o),{success:t.success&&e.success,cases:{...t.cases,[e.key]:e}}),S=(t,e,r,s)=>{let o=s?[s,...t.reason]:t.reason;if(r)throw new Error(o.join());e&&console.error(...o)},p=t=>Array.isArray(t),v=t=>{let e=new Map;for(let s=0;s<t.length;s++){var r;let o=t[s],a=(r=e.get(o))!==null&&r!==void 0?r:0;e.set(o,a+1)}return e},w=(t,e)=>{if(t.size!==e.size)return!1;for(let[r,s]of t)if(e.get(r)!==s)return!1;return!0},m=t=>typeof t=="object"&&!Array.isArray(t)&&t!==null,E=t=>p(t)?t:[t],u=t=>typeof t=="function",A=t=>(Object.freeze(t),Object.getOwnPropertyNames(t).map(e=>{t.hasOwnProperty(e)&&t[e]!==null&&(typeof t[e]=="object"||u(t[e]))&&!Object.isFrozen(t[e])&&A(t[e])}),t),O=Object.freeze({}),N=A({content:{}}),_=A([]),I=t=>t==t&&t!=null,B=(t,e,r)=>{for(let s=0;s<t.length;s++){let o=t[s];p(o)?B(o,e,r):r.exists&&!I(o)||r.truthy&&!o||e.push(o)}return r.mutate?(Object.assign(t,e).splice(e.length),t):e},z=(t,e)=>B(t,[],m(e)?e:O),At=(t,e)=>{if(p(e)){let[r,...s]=e;return r(t,...s)}return u(e)?e(t):(console.error("Pipeline expected either a function or an array (for function expressions). Found "+typeof e),t)},ot=(t,...e)=>e.reduce((r,s)=>At(r,s),t),y=t=>typeof t=="string",vt=(t,e)=>{if(!y(t)||!u(e))return t;let r="";for(let s of t)r+=e(s);return r},Et=t=>t===t.toLowerCase(),Rt=t=>t===t.toUpperCase(),Ct=(t,e,r=["-","_"," "])=>{if(!y(t))return t;let s=a=>r.some(c=>c===a),o="_";return vt(t,a=>s(a)?(o=e,e):Rt(a)&&Et(o)&&!s(o)?(o=a,e+a):(o=a,a))},Z=(t,e=!0)=>{if(!y(t)||!t[0])return t;let r=e?t.slice(1).toLowerCase():t.slice(1);return`${t[0].toUpperCase()}${r}`},Tt=t=>{let e=t.indexOf(".")===0?t.slice(1):t;return e.indexOf(".")===e.length-1?e.slice(0,-1):e},it=t=>t&&Tt(t).replace(/[-_]/gm," ")||t,kt=(t,e)=>t&&it(t).split(/[\s_-]/gm).reduce((r,s,o)=>s?r+=(o>0||e)&&Z(s)||s.toLowerCase():r,"")||t,L=t=>t==null?"":y(t)?t:JSON.stringify(t),ye=/[A-Z]/g,ge=/^ms-/,at={},be=t=>"-"+t.toLowerCase(),U=t=>typeof t=="number"&&t!=t,$=t=>typeof t=="number"&&!U(t),lt=t=>$(t)&&t>=0,Pt=t=>y(t)&&t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")||t,R=t=>typeof t=="object"&&t!==null,ct=(t,e,r,s)=>{let o=t;if(!R(t)||!t||!e)return r!=="set"&&s||void 0;let a=p(e)?Array.from(e):e.split("."),c=a.pop(),f,j;for(;f=a.shift();){let x=t[f];if(R(x)||u(x)?t=x:(r==="set"?t[f]={}:j=!0,t=t[f]),j)return s}return r==="get"?c in t?t[c]:s:r==="unset"?delete t[c]:(t[c]=s)&&o||o},G=(t,e,r)=>ct(t,e,"get",r),_t=(t,e,r="")=>{e=R(e)&&e||{};let s=_t.regex||/\${(.*?)\}/g;return y(t)?t.replace(s,(o,a)=>{let c=(a||o.substr(2,o.length-3)).trim(),f=G(e,c,r);return u(f)?f(e,c,r):f}):console.error("template requires a string as the first argument")||t},Oe=['"',"'"],ut=t=>{if(!y(t))return;let e="";for(let r of t)e=r+e;return e},It=(t,e,r)=>r.map(s=>t.indexOf(s,e)).sort().find(s=>s>=0),Ft=(t,e,r=[" "])=>{let s=It(t,e,r);return t.substring(e,s===-1?t.length:s)},Y=t=>typeof t=="boolean",pt=t=>t==="false"||t==="true",Dt=t=>Y(t)?L(t):t&&t!=="false"&&t!=="0"?"true":"false",Nt=t=>Boolean(t||t===""||t===0),ft=t=>pt(t)?t==="true":Dt(t)==="true",H=t=>L(t).replace(/([^.\d])/gm,""),dt=t=>$(t)?t:t&&!U(t)&&Number(H(t))||0,Lt=t=>y(t)||$(t)||Y(t),ht=(t,e)=>{let[r]=d({x:t,y:e},{$default:Lt});return r?y(t)?t.localeCompare(e):t-e:null},mt=t=>t,Ut=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),yt=t=>{let e=function(...r){return t instanceof e||G(t.prototype,"constructor.name")?new t(...r):t.apply(t,r)};for(let r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return Object.defineProperty(e,"name",{value:t.name,configurable:!0}),e.toString=()=>t.toString(),e},P=(t,e=new WeakMap)=>{if(Object(t)!==t)return t;if(t instanceof Set)return new Set(t);if(e.has(t))return e.get(t);if(p(t))return t.map(s=>P(s));if(u(t))return yt(t);let r=t instanceof Date?new Date(t):t instanceof RegExp?new RegExp(t.source,t.flags):t.constructor?null:Object.create(null);return r===null?qt(t):(e.set(t,r),t instanceof Map?Array.from(t,([s,o])=>r.set(s,P(o,e))):Object.assign(r,...Object.keys(t).map(s=>({[s]:P(t[s],e)}))))},qt=t=>{if(!t)return t;let e=Object.getPrototypeOf(t),r=Object.getOwnPropertyDescriptors(t);for(let[o,a]of Object.entries(r))a.value&&(r[o].value=P(a.value));let s=Object.create(e,r);return Object.isFrozen(t)&&Object.freeze(s),Object.isSealed(t)&&Object.seal(s),s},Mt=t=>t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,Mt),Bt=t=>Object.prototype.toString.call(t).slice(8,-1),zt=(t,...e)=>{if(!e.length)return null;for(let r of e){if(!p(r)){console.error(`Matching case must be an entry (a 2-element array). Found: ${Bt(r)}`,r);break}let[s,o]=r;if(u(s)&&s(t)||s===t)return o}return null};zt.default=()=>!0;let Gt=t=>m(t)?Object.keys(t).length===0:p(t)?t.length===0:y(t)?t.trim().length===0:!!$(t)&&t<1,gt=(t,e)=>{let[r]=d({arr:t,comparator:e},{arr:p,$default:u});return r&&t.length?t.reduce((s,o)=>e(s,o)>0?s:o):null},Ht=t=>p(t)?t.filter((e,r,s)=>s.indexOf(e)==r):t,Jt=(t,e)=>{if(!e)return Ht(t);let{unique:r}=t.reduce((s,o)=>{let a=e(o);return!s.set.has(a)&&s.unique.push(o),s.set.add(a),s},{unique:[],set:new Set});return r},Wt=(t,e=!0)=>R(t)?Object.keys(t).reduce((r,s)=>{let o=t[s];return o==null||(r[s]=e&&R(o)?Wt(o):o),r},m(t)&&{}||[]):console.error("cleanColl requires a collection as the first argument")||t,bt=(t,e,r)=>ct(t,e,"set",r),Kt=Array.isArray,Xt=Object.keys,je=Object.prototype.hasOwnProperty,Ot=(t,e)=>{if(t===e)return!0;if(!t||!e||typeof t!="object"||typeof e!="object")return t!=t&&e!=e;let r=Kt(t),s=Kt(e),o,a,c;if(r&&s){if(a=t.length,a!=e.length)return!1;for(o=a;o--!=0;)if(!Ot(t[o],e[o]))return!1;return!0}if(r!=s)return!1;let f=t instanceof Date,j=e instanceof Date;if(f!=j)return!1;if(f&&j)return t.getTime()==e.getTime();let x=t instanceof RegExp,M=e instanceof RegExp;if(x!=M)return!1;if(x&&M)return t.toString()==e.toString();let $t=Xt(t);if(a=$t.length,a!==Xt(e).length)return!1;for(o=a;o--!=0;)if(!je.call(e,$t[o]))return!1;for(o=a;o--!=0;)if(c=$t[o],!Ot(t[c],e[c]))return!1;return!0},Vt=t=>t&&y(t)?pt(t)?ft(t):$(t)?dt(t):(()=>{try{return JSON.parse(t)}catch{return t}})():t,jt,J="dir",q="type",we=["error","info","log","dir","warn"],Qt=(...t)=>{if(!t.length)return;let e=t.length===1?J:t.pop();(jt||e==="error")&&(typeof t[0]=="string"&&(q==="type"?t[0]=`[ ${e.toUpperCase()} ] ${t[0]}`:q&&(t[0]=`${q} ${t[0]}`)),we.indexOf(e)!==-1?console[e](...t):console[J](...t,e))},Zt=(t,e)=>{t&&Object.entries(t).map(([r,s])=>{e&&e.indexOf(r)!==-1||(typeof s=="object"&&Zt(s),t[r]=void 0,delete t[r])})},Yt=(...t)=>t.reduce((e,r)=>{let s=P(r);return p(s)?[...p(e)&&e||[],...s]:m(s)?Object.entries(s).reduce((o,[a,c])=>({...o,[a]:u(c)?yt(c):R(c)&&a in o?Yt(o[a],c):P(c)}),e):e},p(t[0])&&[]||{}),te=t=>p(t)&&t.length===2&&($(t[0])||y(t[0])),ee=(t,e)=>{if(!p(t)&&!m(t))return console.error(t,"Expected array or object for obj. Found "+typeof t),t;if(!u(e))return console.error("Expected function for cb. Found "+typeof e),t;let r=Object.entries(t),s=p(t)?[]:{};return r.reduce((o,[a,c])=>{let f=e(a,c);return te(f)?bt(o,f[0],f[1]):(console.error(`Callback function must return entry. Found: ${f}. Using current entry instead.`),bt(o,a,c))},s)},W=(t,e,r={})=>m(t)&&u(e)&&Object.entries(t).reduce((s,[o,a])=>e(o,a,s),r)||r,wt=t=>{if(!u(t))throw"Argument must be a function";return(...e)=>new Promise((r,s)=>u(e[e.length-1])?(e.pop(),e.push((...o)=>o&&o[0]?s(...o):r(...o)),t(...e)):r(t(...e)))},$e=Array.from(["caller","callee","arguments","apply","bind","call","toString","__proto__","__defineGetter__","__defineSetter__","hasOwnProperty","__lookupGetter__","__lookupSetter__","isPrototypeOf","propertyIsEnumerable","valueOf","toLocaleString"]).concat(Object.getOwnPropertyNames(Object.prototype)).reduce((t,e)=>(t[e]=!0,t),{}),re=t=>{if(!t.__IS_PROMISIFIED__){for(let e of Object.getOwnPropertyNames(t))if(!(e.indexOf("Async")!==-1||t[`${e}Async`])&&!$e[e])if(u(t[e]))t[`${e}Async`]=wt(t[e]);else{let r=Object.getOwnPropertyDescriptor(t,e).get;u(r)&&(t[`${e}Async`]=wt(r))}t.__IS_PROMISIFIED__=!0}return t},ne=t=>Boolean(t&&t instanceof RegExp),se=t=>ne(t)?t.source:y(t)?t:null,oe=t=>{let e={},r=t.split("?"),s=r[r.length-1];if(!s)return e;let o=s.split("&");return o.length&&o.map(a=>{let c=a.split("=");if(c.length<=1)return e;let f=[c.shift(),c.join("=")];if(f.length===2){let j=decodeURIComponent(f[1]).split(",");if(j&&j.length>1)e[f[0]]=j;else if(f[0]in e){let x=e[f[0]];e[f[0]]=p(x)?x.push(decodeURIComponent(f[1])):[x,decodeURIComponent(f[1])]}else e[f[0]]=decodeURIComponent(f[1])}}),e};n.applyToCloneOf=(t,e)=>{let r;if(t||(r="object (Argument 1) in applyToCloneOf, must be defined!"),m(t)||(r="object (Argument 1) in applyToCloneOf, must be an object!"),e||(r="mutator (Argument 2) in applyToCloneOf, must be defined!"),u(e)||(r="mutator (Argument 2) arg in applyToCloneOf, must be a function!"),r)return console.warn(r)||t;let s=P(t);return e(s),s},n.applyToFunc=At,n.areCountMapsEqual=w,n.areFrequencyEqual=(t,e)=>{let[r]=d({arr:t,otherArr:e},{$default:p});if(!r)return null;if(t===e)return!0;if(t.length!==e.length)return!1;let s=v(t),o=v(e);return w(s,o)},n.areSetEqual=(t,e)=>{let[r]=d({arr:t,otherArr:e},{$default:p});if(!r)return null;if(t===e)return!0;let[s,o]=t.length>e.length?[t,e]:[e,t],a=new Set(o);for(let c=0;c<s.length;c++){let f=s[c];if(!a.has(f))return!1}return!0},n.buildElementCountMap=v,n.buildPath=(...t)=>t.reduce((e,r)=>{let s=toStr(r);return`${e}${s&&"/"+s||""}`},"").replace(/([^:\/]|^)\/{2,}/g,"$1/"),n.camelCase=kt,n.camelCasePath=t=>{let e=t.split(".").map((r,s)=>s>0?Z(r,!1):r);return e.length>1?e.join(""):t},n.capitalize=Z,n.checkCall=(t,...e)=>u(t)?t(...e):void 0,n.cleanColl=Wt,n.cleanStr=it,n.clearObj=Zt,n.cloneArr=t=>Array.from([...p(t)&&t||m(t)&&Object.entries(t)||[]]),n.cloneFunc=yt,n.cloneJson=t=>{try{return JSON.parse(JSON.stringify(t))}catch(e){return Qt(e.message,"error"),null}},n.cloneObjWithPrototypeAndProperties=qt,n.compareTo=ht,n.complement=t=>{let[e]=d({predicate:t},{predicate:u});return e?(...r)=>!t(...r):null},n.containsStr=(t,e,r)=>(t=!y(t)&&L(t)||t,e=!y(e)&&L(e)||e,t.indexOf(e,r)!==-1),n.convertToStrBool=Dt,n.debounce=(t,e=250,r=!1)=>{let s;return function(...o){if(!u(t))return null;let a=this,c=r&&!s;return clearTimeout(s),s=setTimeout(()=>{s=null,!r&&t.apply(a,o)},e),c?u(t)&&t.apply(a,o):void 0}},n.deepClone=P,n.deepEqual=Ot,n.deepFreeze=A,n.deepMerge=Yt,n.delimitString=Ct,n.doIt=(...t)=>{let e=t.slice(),r=e.shift(),s=e.shift(),o=e.pop();if(!$(r)||!u(o))return[];let a=new Array(r),c=[];for(let f=0;f<a.length;f++){let j=o.call(s,f,...e);if(j===!1)break;c.push(j)}return c},n.either=(t,e,r)=>u(r)?r(t,e)&&t||e:Nt(t)&&t||e,n.eitherArr=(t,e)=>p(t)?t:e,n.eitherFunc=(t,e)=>u(t)&&t||e,n.eitherObj=(t,e)=>m(t)&&t||e,n.eitherStr=(t,e)=>y(t)&&t||e,n.ensureArr=E,n.equalsNaN=U,n.everyEntry=(t,e)=>t?m(t)?u(e)?ot(t,Object.entries,r=>r.every(([s,o])=>e(s,o))):(console.error(`Argument 'predicate' passed into everyEntry must a function. Found: ${e}`),!1):(console.error(`Argument obj ${t} must be an object.`),!1):(console.error(`everyEntry expects argument obj [${t}] to be defined.`),!1),n.exists=I,n.filterObj=(t,e)=>t&&(m(t)?u(e)?W(t,(r,s,o)=>(e(r,s)&&(o[r]=s),o),{}):(console.error(`Argument 'predicate' passed into filterObject must a function. Found: ${e}`),t):(console.error(`Object ${t} was not an object. It must be for filterObject`),t)),n.findExtrema=gt,n.findMax=(t=[],e=mt)=>gt(t,(r,s)=>ht(e(r),e(s))),n.findMin=(t=[],e=mt)=>gt(t,(r,s)=>ht(e(s),e(r))),n.flatArr=z,n.flatMap=(t,e)=>{let[r]=d({arr:t,mapFn:e},{arr:p,mapFn:u});return r?t.reduce((s,o)=>{let a=e(o);return p(a)?a.map(c=>s.push(c)):s.push(a),s},[]):t},n.flatUnion=(...t)=>{let e=t.pop(),r={exists:!0},s=u(e)?e:t.push(e)&&void 0;return t.reduce((o,a)=>p(a)?Jt(z([...o,...a],r),s):o,[])},n.get=G,n.getNearestDelimiterIndex=It,n.getNums=H,n.getRegexSource=se,n.getURLParam=t=>{var e,r,s;let[o]=d({paramKey:t},{paramKey:y});if(!o)return null;let a=typeof document<"u"?document:null,c=a==null||(e=a.location)===null||e===void 0?void 0:e.search;return y(c)&&(r=(s=oe(c))===null||s===void 0?void 0:s[t])!==null&&r!==void 0?r:null},n.getWordEndingAt=(t,e,r=[" "])=>{let s=ut(t),o=t.length-e;return ut(Ft(s,o,r))},n.getWordStartingAt=Ft,n.hasDomAccess=()=>{try{return!(typeof window>"u"||!window.document||!window.document.createElement)}catch{return!1}},n.hasOwn=Ut,n.hashString=(t,e)=>{if(!y(t)||t.length==0)return 0;t=t.split("").reverse().join("");let r=0;for(let s=0;s<t.length;s++)r=(r<<5)-r+t.charCodeAt(s),r=`${Math.abs(r&r)}`;return lt(e)?r.slice(0,e):r},n.hyphenator=t=>{if(at.hasOwnProperty(t))return at[t];let e=t.replace(ye,be);return at[t]=ge.test(e)?"-"+e:e},n.identity=mt,n.isArr=p,n.isArrMap=t=>{if(!m(t))return!1;let e=Object.values(t);return ft(e.length&&e.every(p))},n.isBool=Y,n.isColl=R,n.isEmail=t=>!t||!y(t)?!1:Boolean(/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(t)),n.isEmpty=Gt,n.isEmptyColl=t=>p(t)?t.length===0:R(t)&&Object.getOwnPropertyNames(t).length===0,n.isEntry=te,n.isFloat=t=>$(t)&&t%1!=0,n.isFunc=u,n.isInt=t=>$(t)&&t%1==0,n.isLowerCase=Et,n.isNegative=t=>$(t)&&t<0,n.isNonNegative=lt,n.isNum=$,n.isObj=m,n.isOrderable=Lt,n.isPhone=t=>!t||!y(t)?!1:Boolean(/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im.test(t))&&t.replace(/\D/g,"").length<11,n.isPositive=t=>$(t)&&t>0,n.isQuoted=(t,e=Oe)=>y(t)&&e.some(r=>t.startsWith(r)&&t.endsWith(r)),n.isRegex=ne,n.isSame=(t,e)=>t===e?t!==0||1/t==1/e:t!=t&&e!=e,n.isStr=y,n.isStrBool=pt,n.isUpperCase=Rt,n.isUrl=t=>Boolean(/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/.test(t)),n.isUuid=t=>!t||!y(t)?!1:Boolean(/^[0-9A-F]{8}-[0-9A-F]{4}-[4][0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i.test(t)),n.isValidDate=t=>!isNaN((t instanceof Date&&t||new Date(t)).getTime()),n.isValidUrl=t=>/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-/]))?/.test(t),n.joinRegex=(...t)=>{let[e,r]=(o=>{if(p(o[0]))return[o[0],o[1]];let a=o[o.length-1],c=y(a)?a:void 0;return[c?o.splice(0,o.length-1):o,c]})(t),s=e.reduce((o,a)=>{let c=se(a);return c?o===""?c:`${o}|${c}`:o},"");return new RegExp(`(${s})`,r)},n.jsonEqual=(t,e)=>{try{return JSON.stringify(t)===JSON.stringify(e)}catch{return!1}},n.keyMap=(t,e)=>p(t)&&t.reduce((r,s)=>{if(!y(s))return r;let o=e&&s.toUpperCase()||s;return r[o]=o,r},{})||{},n.limbo=t=>t&&u(t.then)?t.then(e=>[null,e]).catch(e=>[e,void 0]):[new Error("A promise or thenable is required as the first argument!"),null],n.logData=Qt,n.mapColl=(t,e)=>u(e)&&R(t)?Object.keys(t).map(r=>e(r,t[r],t)):p(t)?[]:{},n.mapEntries=ee,n.mapFind=(t,e,r=I)=>{let[s]=d({coll:t,mapper:e,test:r},{coll:R,$default:u});if(s)return m(t)?((o,a,c)=>{let f=0;for(let j in o){if(!o.hasOwnProperty(j))continue;let x=a(o[j],j,f);if(c(x,j,f))return x;f++}return null})(t,e,r):((o,a,c)=>{for(let f=0;f<o.length;f++){let j=a(o[f],f,f);if(c(j,f,f))return j}return null})(t,e,r)},n.mapKeys=(t,e)=>m(t)&&u(e)?ee(t,(r,s)=>[e(r),s]):t,n.mapObj=(t,e)=>m(t)&&u(e)&&Object.entries(t).map(([r,s])=>e(r,s))||t,n.mapString=vt,n.match=zt,n.memorize=(t,e,r=1)=>{if(!u(t)||e&&!u(e))return console.error("Error: Expected a function",t,e);let s=function(){let o=s.cache,a=e?e.apply(this,arguments):arguments[0];if(Ut(o,a))return o[a];let c=t.apply(this,arguments);return $(r)&&Object.keys(o).length<r?o[a]=c:s.cache={[a]:c},c};return s.cache={},s.destroy=()=>{e=void 0,s.cache=void 0,s.destroy=void 0,s=void 0},s},n.mod=(t,e)=>(t%e+e)%e,n.noOp=()=>{},n.noOpObj=O,n.noPropArr=_,n.noPropObj=N,n.nth=t=>{if(!$(t)&&(!(t=H(t))||(t=dt(t),U(t))))return"";let e=t%100;if(e>=10&&e<=20)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},n.objToQuery=t=>{let e;return W(t,(r,s,o)=>{if(!s)return o;let a=y(s)||$(s)||Y(s)?s:R(s)?p(s)?s.join(","):JSON.stringify(s):null;return a&&(o=e?`${o}&${encodeURIComponent(r)}=${encodeURIComponent(a)}`:`?${encodeURIComponent(r)}=${encodeURIComponent(a)}`,e=!0),o},"")},n.omitKeys=(t={},e=[])=>m(t)&&W(t,(r,s,o)=>(e.indexOf(r)===-1&&(o[r]=t[r]),o),{})||{},n.omitRange=(t,e,r)=>{let[s]=d({arr:t,startIndex:e,count:r},{arr:p,$default:lt});if(!s)return t;let o=[...t];return o.splice(e,r),o},n.parseErrorMessage=t=>y(t)&&!Gt(t)?t:m(t)?t.message:null,n.parseJSON=(t,e=!0)=>{try{return JSON.parse(t)}catch(r){return e&&console.error(r.message),null}},n.pickKeys=(t={},e=[])=>m(t)&&e.reduce((r,s)=>(s in t&&(r[s]=t[s]),r),{})||{},n.pipeline=ot,n.plural=t=>t&&t.length&&t[t.length-1]!=="s"?t+"s":t,n.promisify=wt,n.promisifyAll=t=>{if(!m(t))return t;re(t);let e=Object.getPrototypeOf(t);return e&&Object.getPrototypeOf(e)!==null&&re(e),t},n.queryToObj=oe,n.randomArr=(t,e)=>{if(!p(t))return t;let r=e||1,s=[];for(let o=0;o<r;o++)s.push(t[Math.floor(Math.random()*t.length)]);return e?s:s[0]},n.randomizeArr=t=>!p(t)&&t||t.sort(()=>.5-Math.random()),n.reduceColl=(t,e,r)=>u(e)&&R(t)?Object.keys(t).reduce((s,o)=>e(o,t[o],t,s),r):p(t)?[]:{},n.reduceObj=W,n.removeDot=Tt,n.repeat=(t,e,r=!1)=>{if(!e||e<=0)return[];if(!$(e))return console.error("Times argument must be a number"),[];let s=[];for(let o=0;o<e;o++){let a=u(t)?t():r?P(t):t;s.push(a)}return s},n.resetLogs=()=>{jt=void 0,J="log",q="type"},n.reverseStr=ut,n.runSeq=async(t=[],e={})=>{let[r]=d({asyncFns:t},{asyncFns:p});if(!r)return[];let{cloneResults:s=!1,returnOriginal:o=!0}=e,a=[];for(let c of t){let f=u(c)?await c(a.length,s?P(a):a):o?c:void 0;a.push(f)}return a},n.sanitize=Pt,n.sanitizeCopy=t=>JSON.parse(Pt(JSON.stringify(t))),n.set=bt,n.setLogs=(t,e,r)=>{jt=t,J=e||J||"log",q=r||q||"type"},n.shallowEqual=(t,e,r)=>{if(r&&(p(r)||y(r))&&(t=G(t,r),e=G(e,r)),t===e)return!0;if(!(t&&R(t)&&e&&R(e))||Object.keys(t).length!==Object.keys(e).length)return!1;for(let s in t)if(t[s]!==e[s])return!1;return!0},n.singular=t=>t&&t.length&&t[t.length-1]==="s"?t.slice(0,t.length-1):t,n.snakeCase=t=>Ct(t,"_").toLowerCase(),n.softFalsy=Nt,n.someEntry=(t,e)=>t?m(t)?u(e)?ot(t,Object.entries,r=>r.some(([s,o])=>e(s,o))):(console.error(`Argument 'predicate' passed into someEntry must a function. Found: ${e}`),!1):(console.error(`Argument obj ${t} must be an object.`),!1):(console.error(`someEntry expects argument obj [${t}] to be defined.`),!1),n.spaceJoin=(t,e)=>(e=p(e)?e:[e]).reduce((r,s)=>y(s)?`${r?r+" ":""}${s}`.trim():r,y(t)?t:""),n.splitByKeys=(t={},e)=>{if(!e)return[{},{...t}];let r=[{},{}],s=E(e);return m(t)?W(t,(o,a,c)=>(I(s.find(f=>I(f)&&L(f)===o))?c[0][o]=t[o]:c[1][o]=t[o],c),r):r},n.strToType=Vt,n.styleCase=t=>{if(!y(t))return t;let e=kt(t);return`${e[0].toLowerCase()}${e.slice(1)}`},n.template=_t,n.throttle=(t,e=100)=>{let r=!1;return function(...s){if(!r)return r=!0,t.apply(this,s),setTimeout(()=>{r=!1},e)}},n.throttleLast=(t,e,r=100)=>{let s;return function(...o){s&&clearTimeout(s),s=setTimeout(()=>{t.apply(this,o),clearTimeout(s)},r),typeof e=="function"&&e()}},n.timedRun=async(t,...e)=>{let[r]=d({fn:t},{fn:u});if(!r)return[void 0,-1];let s=new Date;return[await t(...e),new Date-s]},n.toBool=ft,n.toFloat=t=>t&&!U(t)&&parseFloat($(t)&&t||H(t))||0,n.toInt=t=>t&&!U(t)&&parseInt($(t)&&t||H(t))||0,n.toNum=dt,n.toObj=(t,e,r)=>p(t)?Object.keys(t).reduce((s,o)=>(s[o]=t[o],s),{}):y(str)?(e=e||"=",r=r||"&",str.split(r).reduce((s,o)=>{let a=o.split(e);return s[a[0].trim()]=Vt(a[1].trim()),s},{})):{},n.toStr=L,n.trainCase=t=>y(t)&&t.split(/(?=[A-Z])|[\s_-]/gm).join("-").toLowerCase()||t,n.trimStringFields=t=>Object.entries(t).reduce((e,[r,s])=>(e[r]=y(s)?s.trim():s,e),t),n.typeOf=Bt,n.uniqArr=Jt,n.uniqArrByReference=Ht,n.unset=(t,e)=>ct(t,e,"unset"),n.uuid=Mt,n.validFilename=t=>t?!(/[<>:"/\\|?*\u0000-\u001F]/g.test(t)||/^(con|prn|aux|nul|com\d|lpt\d)$/i.test(t)||/^\.\.?$/.test(t)):!1,n.validate=d,n.wait=t=>new Promise(e=>setTimeout(()=>e(!0),t)),n.wordCaps=t=>y(t)?it(t).split(" ").map(e=>e&&Z(e)||"").join(" "):t})});var Ne={};Ce(Ne,{setParkinTestGlobals:()=>De});module.exports=Te(Ne);var St=et(K());var T=et(K()),nt=(0,T.keyMap)(["beforeAll","beforeEach","afterAll","afterEach"]),xt={...(0,T.keyMap)(["test","it","xtest","xit","describe"]),...nt},g={...xt,...(0,T.keyMap)(["root"])};var k=n=>{throw new Error(n)},le=(n,i,l)=>{!(0,T.isFunc)(i)&&k(`The ${n} method requires a "function" as the first argument`)(!l||l.type===g.root)&&k(`The ${n} method must be called within a ${g.describe} method`)},ce=n=>{n.type!==g.root&&k(`Invalid root type "${n.type}" set for root object`),!n.describes||!n.describes.length&&k("No tests have been registered to this ParkinTest instance")},ke=(n,i,l)=>{!(0,T.isStr)(n)&&k("Test item type is required as a string"),!(0,T.isFunc)(l)&&k(`The ${n} method requires a "function" as the second argument`),!(0,T.isStr)(i)&&k(`The ${n} method requires a "string" as the first argument`)},X=(n,i=T.noOpObj,l=!0)=>{let{description:d,action:h}=i;return l&&ke(n,d,h),{...i,type:n}},ue=(n,i)=>{let l=X(g.describe,{...st(),action:i,tests:[],description:n});return l.disabled=()=>l.skip=!0,l},st=()=>X(g.root,{describes:[],...Object.values(nt).reduce((n,i)=>(n[i]=[],n),{})},!1);var V=(n,{id:i,fullName:l,action:d,failed:h,passed:b,testPath:S})=>{let p={id:i,action:d,testPath:S,fullName:l,type:n.type,failedExpectations:[],passedExpectations:[],failed:Boolean(h),passed:Boolean(b),description:n.description,timestamp:new Date().getTime()};return(0,St.isObj)(h)&&p.failedExpectations.push(h),(0,St.isObj)(b)&&p.passedExpectations.push(b),(b||h)&&(p.status=b?"passed":"failed"),p},F=async n=>{let{type:i,test:l,specId:d,suiteId:h,describe:b,root:S}=n,p,v=S||b,w=S?S.description:l?`${b==null?void 0:b.description} > ${l==null?void 0:l.description} > ${i}`:`${b==null?void 0:b.description} > ${i}`;try{v[i].length&&await Promise.all(v[i].map((m,E)=>(p=E,m())))}catch(m){return V(v,{fullName:w,action:i,status:"failed",id:l?d:h,failed:{name:m.name,message:m.message},testPath:l?`/${h}/${d}/${i}${p}`:`/${h}/${i}${p}`})}},Pe=async n=>{let{suiteId:i,describe:l,testOnly:d,specDone:h,specStarted:b}=n,S=!1,p=[];for(let v=0;v<l.tests.length;v++){let w=l.tests[v],m=`spec${v}`,E=`/${i}/${m}`,u=`${l.description} > ${w.description}`,A=V(w,{fullName:u,testPath:E,id:m,action:"start"});if(d&&!w.only||w.skip){b({...A,skipped:!0,action:"skipped",status:"skipped"});continue}else b(A);let O=await F({test:w,specId:m,suiteId:i,describe:l,type:g.beforeEach});if(O){S=!0,p.push(O),h(O);break}try{let _=await w.action();A=V(w,{fullName:u,id:m,testPath:E,action:g.test,passed:_||!0})}catch(_){A=V(w,{fullName:u,id:m,action:g.test,testPath:E,failed:{name:_.name,message:_.message}}),S=!0}let N=await F({test:w,specId:m,suiteId:i,describe:l,type:g.afterEach});if(N){S=!0,p.push(N),h(N);break}p.push(A),h({...A,action:"end"})}return{tests:p,failed:S}},_e=async({root:n,suiteId:i,describe:l})=>{let d=await F({root:n,suiteId:g.root,type:g.beforeEach}),h=!d&&await F({suiteId:i,describe:l,type:g.beforeAll});return d||h},Ie=async({root:n,suiteId:i,describe:l})=>{let d=await F({root:n,suiteId:g.root,type:g.afterEach}),h=!d&&await F({suiteId:i,describe:l,type:g.afterAll});return d||h},pe=async n=>{let{root:i,testOnly:l,specDone:d,suiteDone:h,specStarted:b,parentIdx:S="",suiteStarted:p,describeOnly:v}=n,w=!1,m=[];for(let E=0;E<i.describes.length;E++){let u=i.describes[E],A=`suite-${S}${E}`,O=V(u,{id:A,action:"start",testPath:`/${A}`,fullName:u.description});if(u.skip||v&&!u.only&&!u.onlyChild||l&&!u.onlyChild){p({...O,skipped:!0,action:"skipped",status:"skipped"});continue}else p(O);let _=await _e({root:i,suiteId:A,describe:u});if(_){w=!0,O={...O,..._},h(O),m.push(O);continue}let I=await Pe({suiteId:A,describe:u,testOnly:l,specDone:d,specStarted:b}),B=u.describes&&u.describes.length&&await pe({...n,root:u,parentIdx:`${E}-`});O={...O,...B,action:"end",tests:I.tests},I.failed||B.failed?(w=!0,O.failed=!0):O.passed=!0;let z=await Ie({root:i,suiteId:A,describe:u});if(z){w=!0,O={...O,...z},h(O),m.push(O);continue}h(O),m.push(O)}return{describes:m,failed:w}},fe=async n=>{ce(n.root);let i=await F({root:n.root,suiteId:g.root,type:g.beforeAll});if(i)return[i];let{describes:l}=await pe(n),d=await F({root:n.root,suiteId:g.root,type:g.afterAll});return d&&l.push(d),l};var C=et(K());var Q=class{timeout=6e3;#o=C.noOp;#i=C.noOp;#a=C.noOp;#l=C.noOp;#t=void 0;#r=!1;#n=!1;#s=!0;#e=st();constructor(i=C.noOpObj){this.#e.description=i.description||"root",this.#u(),this.#p(),this.#f(),this.it=this.test,this.xit=this.xtest,this.#t=this.#e,this.#c(i)}run=(i=C.noOpObj)=>{i.description&&(this.#e.description=i.description),this.#c(i);let l=fe({root:this.#e,testOnly:this.#r,specDone:this.#o,suiteDone:this.#i,specStarted:this.#a,describeOnly:this.#n,suiteStarted:this.#l});return this.#s&&this.clean(),l};clean=()=>{this.timeout=6e3,this.#s=!0,this.#r=!1,this.#n=!1,this.#t=void 0,this.#e=void 0,this.#e=st(),this.#t=this.#e};getActiveParent=()=>this.#t;#c=({timeout:i,autoClean:l,specDone:d,suiteDone:h,specStarted:b,suiteStarted:S})=>{i&&(this.timeout=i),d&&(this.#o=d),h&&(this.#i=h),b&&(this.#a=b),S&&(this.#l=S),l===!1&&(this.#s=l)};#u=()=>{this.describe.only=(...i)=>{this.describe(...i);let l=this.#t.describes[this.#t.describes.length-1];l.only=!0,this.#n=!0,(0,C.checkCall)(this.#t.hasOnlyChild)},this.test.only=(...i)=>{this.test(...i);let l=this.#t.tests[this.#t.tests.length-1];l.only=!0,this.#r=!0,(0,C.checkCall)(this.#t.hasOnlyChild)}};#p=()=>{this.describe.skip=(...i)=>{this.describe(...i);let l=this.#t.describes[this.#t.describes.length-1];l.skip=!0},this.test.skip=(...i)=>{this.test(...i);let l=this.#t.tests[this.#t.tests.length-1];l.skip=!0}};#d=()=>{};#f=()=>{Object.values(nt).map(i=>{this[i]=l=>{le(i,l,this.#t),this.#t[i].push(l)}})};describe=(i,l)=>{let d=ue(i,l);this.#t.describes.push(d);let h=this.#t;d.hasOnlyChild=()=>{d.onlyChild=!0,(0,C.checkCall)(h.hasOnlyChild)},this.#t=d,l(),this.#t=h};test=(i,l,d)=>{(!this.#t||this.#t.type===g.root)&&k(`All ${g.test} method calls must be called within a ${g.describe} method`);let h=X(g.test,{action:l,timeout:d,description:i});h.disabled=()=>h.skip=!0,this.#t.tests.push(h)};xtest=i=>{(!this.#t||this.#t.type===g.root)&&k(`All ${g.test} method calls must be called within a ${g.describe} method`),!(0,C.isStr)(i)&&k(`The ${g.test} method requires a "string" as the first argument`);let l=X(g.test,{description:i,skip:!0},!1);l.disabled=()=>l.skip=!0,this.#t.tests.push(l)}};var D=et(K()),Fe=Boolean(typeof window<"u"),de=Boolean(typeof global<"u"),He=Boolean(typeof module=="object"),Je=Boolean(typeof require=="function"),We=Boolean(de&&typeof global.jasmine<"u");var he=()=>{try{return Fe?(0,D.checkCall)(()=>window):de?(0,D.checkCall)(()=>global):D.noOpObj}catch{return D.noOpObj}};var me=n=>{let i=new Q,l=he(),d=n||process.env.PARKIN_TEST_GLOBALS_OVERRIDE;(!l.ParkinTest||d)&&(l.ParkinTest=Q),(!l.PTE||d)&&(l.PTE=i),Object.values(xt).map(h=>(!l[h]||d)&&(l[h]=i[h].bind(i)))};me();var De=(n=!0)=>me(n);0&&(module.exports={setParkinTestGlobals});
//# sourceMappingURL=global.js.map
